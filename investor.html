<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡§á‡§®‡•ç‡§µ‡•á‡§∏‡•ç‡§ü‡§∞ ‡§™‡•ã‡§∞‡•ç‡§ü‡§≤ | AK CAPITAL SERVICE</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root { --primary: #004d99; --secondary: #25D366; --accent: #e67e22; --bg: #f0f2f5; }
        body { font-family: 'Segoe UI', sans-serif; margin: 0; background-color: var(--bg); }
        .header { background: var(--primary); color: white; padding: 20px; text-align: center; position: sticky; top: 0; display: flex; justify-content: space-between; align-items: center; z-index: 100; }
        .container { width: 90%; max-width: 450px; margin: 25px auto; }
        .card { background: white; padding: 25px; border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); margin-bottom: 20px; position: relative; }
        input { width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #ddd; border-radius: 8px; box-sizing: border-box; }
        .btn { background: var(--primary); color: white; padding: 14px; border: none; border-radius: 8px; width: 100%; font-weight: bold; cursor: pointer; margin-top: 10px; }
        .data-row { display: flex; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid #eee; }
        
        /* ‡§™‡•ç‡§≤‡§∏ ‡§¨‡§ü‡§® ‡§î‡§∞ ‡§´‡•â‡§∞‡•ç‡§Æ (Modal) */
        .plus-btn { position: fixed; bottom: 30px; right: 25px; background: var(--secondary); color: white; width: 60px; height: 60px; border-radius: 50%; font-size: 35px; border: none; box-shadow: 0 4px 10px rgba(0,0,0,0.3); cursor: pointer; display: none; z-index: 999; }
        .modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); align-items: center; justify-content: center; }
        .hidden { display: none; }
    </style>
</head>
<body>

    <div class="header">
        <div style="width:30px;"></div>
        <h2 style="margin:0; font-size: 20px;">‡§á‡§®‡•ç‡§µ‡•á‡§∏‡•ç‡§ü‡§∞ ‡§™‡•ã‡§∞‡•ç‡§ü‡§≤</h2>
        <i class="fas fa-cog hidden" id="setBtn" onclick="toggleView('settingsPage')" style="cursor:pointer; font-size:20px;"></i>
    </div>

    <div class="container">
        <div id="loginArea" class="card">
            <h3 style="text-align:center; color:var(--primary);">‡§≤‡•â‡§ó‡§ø‡§® ‡§ï‡§∞‡•á‡§Ç</h3>
            <input type="email" id="email" placeholder="‡§à‡§Æ‡•á‡§≤ ‡§Ü‡§à‡§°‡•Ä">
            <input type="password" id="password" placeholder="‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§°">
            <button class="btn" onclick="login()">‡§≤‡•â‡§ó‡§ø‡§® ‡§ï‡§∞‡•á‡§Ç</button>
        </div>

        <div id="dashboardArea" class="hidden">
            <div class="card" style="border-top: 5px solid var(--accent);">
                <h3 id="uName" style="color:var(--primary);">‡§®‡§Æ‡§∏‡•ç‡§§‡•á!</h3>
                <p style="font-size:13px; color:#666;">"AK CAPITAL SERVICE ‡§™‡§∞ ‡§Ü‡§™‡§ï‡•á ‡§µ‡§ø‡§∂‡•ç‡§µ‡§æ‡§∏ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ß‡§®‡•ç‡§Ø‡§µ‡§æ‡§¶‡•§"</p>
                <hr>
                <div class="data-row"><span>üí∞ ‡§ï‡•Å‡§≤ ‡§®‡§ø‡§µ‡•á‡§∂:</span> <strong id="uAmt">‚Çπ0</strong></div>
                <div class="data-row"><span>üìÖ ‡§Ö‡§µ‡§ß‡§ø:</span> <strong id="uDays">0 ‡§¶‡§ø‡§®</strong></div>
                <div class="data-row"><span>üìà ‡§¨‡•ç‡§Ø‡§æ‡§ú:</span> <strong id="uInt">‚Çπ0</strong></div>
                <div class="data-row"><span>üìä ‡§µ‡§æ‡§∞‡•ç‡§∑‡§ø‡§ï ‡§≤‡§æ‡§≠:</span> <strong id="uPerc">0%</strong></div>
            </div>
            <button class="btn" style="background:var(--secondary);" onclick="window.open('https://wa.me/917038164867')">‡§∏‡•Ä‡§ß‡§æ ‡§µ‡•ç‡§π‡§æ‡§ü‡•ç‡§∏‡§è‡§™ ‡§∏‡§™‡•ã‡§∞‡•ç‡§ü</button>
            <button class="btn" style="background:#666;" onclick="location.reload()">‡§≤‡•â‡§ó‡§Ü‡§â‡§ü</button>
        </div>

        <div id="settingsPage" class="hidden">
            <div class="card">
                <h3>‡§∏‡•á‡§ü‡§ø‡§Ç‡§ó‡•ç‡§∏</h3>
                <input type="password" id="newPass" placeholder="‡§®‡§Ø‡§æ ‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§°">
                <button class="btn" onclick="updatePass()">‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§° ‡§Ö‡§™‡§°‡•á‡§ü ‡§ï‡§∞‡•á‡§Ç</button>
                <button class="btn" style="background:#eee; color:#333;" onclick="toggleView('dashboardArea')">‡§µ‡§æ‡§™‡§∏</button>
            </div>
        </div>
    </div>

    <div id="investModal" class="modal">
        <div class="card" style="width: 80%; max-width: 350px;">
            <h3 style="text-align:center; color:var(--primary);">‡§®‡§Ø‡§æ ‡§®‡§ø‡§µ‡•á‡§∂ ‡§´‡•â‡§∞‡•ç‡§Æ</h3>
            <input type="number" id="investAmt" placeholder="‡§ï‡§ø‡§§‡§®‡•Ä ‡§∞‡§æ‡§∂‡§ø ‡§®‡§ø‡§µ‡•á‡§∂ ‡§ï‡§∞‡§®‡•Ä ‡§π‡•à?">
            <button class="btn" onclick="sendInvestReq()">‡§µ‡•ç‡§π‡§æ‡§ü‡•ç‡§∏‡§è‡§™ ‡§™‡§∞ ‡§≠‡•á‡§ú‡•á‡§Ç</button>
            <button class="btn" style="background:#eee; color:#333;" onclick="closeModal()">‡§¨‡§Ç‡§¶ ‡§ï‡§∞‡•á‡§Ç</button>
        </div>
    </div>

    <button id="plusBtn" class="plus-btn" onclick="openModal()">+</button>

    <script>
        const scriptURL = 'https://script.google.com/macros/s/AKfycbx93YTgj_eD0BJkDVBOlmSbQIYQDR0yO3TfxcuXpK-Mnptrxuhkd16gH-tBODyQUrvCgQ/exec';
        let userEmail = "";

        async function login() {
            userEmail = document.getElementById('email').value.trim();
            const pass = document.getElementById('password').value.trim();
            if(!userEmail || !pass) return alert("‡§µ‡§ø‡§µ‡§∞‡§£ ‡§≠‡§∞‡•á‡§Ç");

            try {
                const res = await fetch(`${scriptURL}?action=login&email=${userEmail}&password=${pass}`);
                const data = await res.json();
                
                if(data.status === "success") {
                    document.getElementById('uName').innerText = "‡§®‡§Æ‡§∏‡•ç‡§§‡•á, " + data.name + "!";
                    document.getElementById('uAmt').innerText = "‚Çπ" + (data.amount || 0);
                    // 'undefined' ‡§´‡§ø‡§ï‡•ç‡§∏:
                    document.getElementById('uDays').innerText = (data.days || 0) + " ‡§¶‡§ø‡§®";
                    document.getElementById('uInt').innerText = "‚Çπ" + (data.interest || 0);
                    
                    let p = ((data.interest / data.amount) * 100).toFixed(2);
                    document.getElementById('uPerc').innerText = isNaN(p) ? "0%" : p + "%";

                    document.getElementById('loginArea').classList.add('hidden');
                    document.getElementById('dashboardArea').classList.remove('hidden');
                    document.getElementById('setBtn').classList.remove('hidden');
                    document.getElementById('plusBtn').style.display = 'block';
                } else { alert("‡§ó‡§≤‡§§ ‡§Ü‡§à‡§°‡•Ä ‡§Ø‡§æ ‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§°"); }
            } catch(e) { alert("‡§∏‡§∞‡•ç‡§µ‡§∞ ‡§è‡§∞‡§∞!"); }
        }

        function toggleView(id) {
            document.getElementById('dashboardArea').classList.add('hidden');
            document.getElementById('settingsPage').classList.add('hidden');
            document.getElementById(id).classList.remove('hidden');
        }

        // ‡§´‡•â‡§∞‡•ç‡§Æ ‡§´‡§Ç‡§ï‡•ç‡§∂‡§®
        function openModal() { document.getElementById('investModal').style.display = 'flex'; }
        function closeModal() { document.getElementById('investModal').style.display = 'none'; }
        
        function sendInvestReq() {
            const amt = document.getElementById('investAmt').value;
            if(!amt) return alert("‡§∞‡§æ‡§∂‡§ø ‡§≠‡§∞‡•á‡§Ç");
            const msg = `‡§®‡§Æ‡§∏‡•ç‡§§‡•á AK CAPITAL, ‡§Æ‡•à‡§Ç ‚Çπ${amt} ‡§ï‡§æ ‡§®‡§Ø‡§æ ‡§®‡§ø‡§µ‡•á‡§∂ ‡§ï‡§∞‡§®‡§æ ‡§ö‡§æ‡§π‡§§‡§æ ‡§π‡•Ç‡§Å‡•§ ‡§Æ‡•á‡§∞‡§æ ‡§à‡§Æ‡•á‡§≤: ${userEmail}`;
            window.open(`https://wa.me/917038164867?text=${encodeURIComponent(msg)}`);
            closeModal();
        }

        async function updatePass() {
            const np = document.getElementById('newPass').value;
            if(!np) return alert("‡§®‡§Ø‡§æ ‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§° ‡§≤‡§ø‡§ñ‡•á‡§Ç");
            await fetch(`${scriptURL}?action=changePass&email=${userEmail}&newPass=${np}`);
            alert("‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§° ‡§¨‡§¶‡§≤ ‡§ó‡§Ø‡§æ!");
        }
    </script>
</body>
</html>
